[[cse]][#top]##

[width="100%",cols="<50%,>50%",]
|===
a|
Developing JAXB Applications Using EclipseLink MOXy, *Release 4.0* +

a|
[width="99%",cols="20%,^16%,16%,^16%,16%,^16%",]
|===
|  |image:../../dcommon/images/contents.png[Go To Table Of
Contents,width=16,height=16] + | 
|link:../../[image:../../dcommon/images/search.png[Search] +
[.mini]##] | 
|link:../eclipselink_moxy.pdf[image:../../dcommon/images/pdf_icon.png[PDF]]
|===

|===

'''''

[cols="^,^,",]
|===
|link:privately_owned_relations.htm[image:../../dcommon/images/larrow.png[Previous,width=16,height=16]]
|link:privately_owned_relations002.htm[image:../../dcommon/images/rarrow.png[Next,width=16,height=16]]
| 
|===

[#BABHAJID]####[#TLJAX324]####

== Mapping Privately Owned One-to-One Relationships

This section demonstrates several ways to map a one-to-one relationship
between objects. By default, one-to-one relationships are
privately-owned in JAXB – their XML content will appear nested inside
the owning element. For example, a *Customer* with a one-to-one mapping
to a *PhoneNumber* would be marshalled as:

[#TLJAX325]####[#sthref117]####

*_Example 6-1 Sample XML Mapping_*

[source,oac_no_warn]
----
<customer>
   <name>Bob Smith</name>
   <id>1982812</id>
   <phone-number>
      <area-code>613</area-code>
      <number>5550210</number>
      <extension>20016</extension>
   </phone-number>
</customer>
 
----

[#TLJAX326]##

[#sthref118]##

=== Mapping to an Element

Given the XML schema in link:#BABEIBFB[Example 6-2],
link:#BABCHCJD[Figure 6-1] illustrates a one-to-one (1:1) relationship
between two complex types.

[#BABEIBFB]####[#TLJAX327]####

*_Example 6-2 Sample XML Schema_*

[source,oac_no_warn]
----
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 
   <xsd:element name="customer" type="customer-type"/>
 
   <xsd:complexType name="customer-type">
      <xsd:element name="phone-number" type="phone-type"/>
   </xsd:complexType>
 
   <xsd:complexType name="phone-type">
      <xsd:element name="area-code" type="xsd:int"/>
      <xsd:element name="number" type="xsd:int"/>
      <xsd:element name="extension" type="xsd:int"/>
   </xsd:complexType>
 
</xsd:schema>
 
----

[#BABCHCJD]####[#TLJAX328]####

*_Figure 6-1 One-to-one Relationship_*

image:img/onetoone.gif[Description of Figure 6-1
follows,title="Description of Figure 6-1 follows"] +
link:img_text/onetoone.htm[Description of "Figure 6-1 One-to-one
Relationship"] +
 +

link:#BABJIIGJ[Example 6-3] shows how to annotate your Java class to
obtain this mapping with EclipseLink. The standard JAXB `@XmlElement`
annotation can be used to indicate that the associated Java field should
be mapped to an XML element.

 +

[width="100%",cols="<100%",]
|===
a|
image:../../dcommon/images/note_icon.png[Note,width=16,height=16]Note:

By default, JAXB will assume all fields on your Java object are
`@XmlElements`, so in many cases the annotation itself is not required.
If, however, you want to customize the Java field's XML name, you can
specify an `@XmlElement` annotation with a name argument.

|===

 +

[#BABJIIGJ]####[#TLJAX329]####

*_Example 6-3 Using the @XmlElement Annotation_*

[source,oac_no_warn]
----
package example;
 
import jakarta.xml.bind.annotation.*;
 
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Customer {
   @XmlElement(name="phone-number")
   private PhoneNumber phoneNumber;
 
   ...
}
 
package example;
 
import jakarta.xml.bind.annotation.*;
 
@XmlAccessorType(XmlAccessType.FIELD)
public class PhoneNumber {
   @XmlElement(name="area-code")
   private Integer areaCode;
 
   private Integer number;
 
   private Integer extension;
 
   ...
}
 
----

link:#BABBEIFJ[Example 6-4] shows how to define your mapping information
in an EclipseLink's XML Bindings document.

[#BABBEIFJ]####[#TLJAX330]####

*_Example 6-4 Sample XML Mapping_*

[source,oac_no_warn]
----
...
<java-type name="Customer">
   <xml-root-element name="customer"/>
   <java-attributes>
      <xml-element java-attribute="phoneNumber" name="phone-number" type="PhoneNumber"/>
   </java-attributes>
</java-type>
 
<java-type name="PhoneNumber">
   <java-attributes>
      <xml-value java-attribute="areaCode" name="area-code" type="java.lang.Integer"/>
      <xml-value java-attribute="number" type="java.lang.Integer"/>
      <xml-value java-attribute="extension" type="java.lang.Integer"/>
   </java-attributes>
</java-type>
...
 
----

[#TLJAX331]##

[#sthref120]##

=== Using EclipseLink's @XmlPath Annotation

By default, your Java attributes will be mapped to XML based on their
attributes Java name, or by a name specified in an `@XmlElement`
annotation. This mapping is based on XPath, and EclipseLink's `@XmlPath`
annotation allows you to customize this mapping. For example, you can
use it to control the nesting of your elements in XML:

[#TLJAX332]####[#sthref121]####

*_Example 6-5 Using the @XmlPath Annotation_*

[source,oac_no_warn]
----
package example;
 
import jakarta.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.*;
 
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Customer {
   @XmlPath("contact-info/phone-number")
   private PhoneNumber phoneNumber;
 
   ...
}
 
----

[#TLJAX333]####[#sthref122]####

*_Example 6-6 Using EclipseLink XML Bindings_*

[source,oac_no_warn]
----
...
<java-type name="Customer">
   <xml-root-element name="customer"/>
   <java-attributes>
      <xml-element java-attribute="phoneNumber" name="phone-number"
         type="PhoneNumber" xml-path="contact-info/phone-number"/>
   </java-attributes>
</java-type>
...
 
----

This will produce the following XML:

[source,oac_no_warn]
----
<customer>
   <contact-info>
      <phone-number>
         <number>555-631-2124</number>
      </phone-number>
   </contact-info>
</customer>
 
----

You can also use `@XmlPath` to map to different occurrences of the same
element in XML, by index. For example:

[#TLJAX334]####[#sthref123]####

*_Example 6-7 Using the @XmlPath Annotation_*

[source,oac_no_warn]
----
package example;
 
import jakarta.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.*;
 
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Customer {
   @XmlPath("contact-info/phone[1]")
   private PhoneNumber homePhone;
   @XmlPath("contact-info/phone[2]")
   private PhoneNumber workPhone;
   ...
}
 
----

will produce the following XML:

[source,oac_no_warn]
----
<customer>
   <contact-info>
      <phone>
         <number>555-631-2124</number>
      </phone>
      <phone>
         <number>555-631-8298</number>
      </phone>
   </contact-info>
</customer>
 
----

For information on using XPath in your mappings, see
link:advanced_concepts005.htm#CHDBFCAA["Mapping Using XPath
Predicates"].

'''''

[width="66%",cols="50%,^,>50%",]
|===
a|
[width="96%",cols=",^50%,^50%",]
|===
| 
|link:privately_owned_relations.htm[image:../../dcommon/images/larrow.png[Previous,width=16,height=16]]
|link:privately_owned_relations002.htm[image:../../dcommon/images/rarrow.png[Next,width=16,height=16]]
|===

|http://www.eclipse.org/eclipselink/[image:../../dcommon/images/ellogo.png[EclipseLink,width=150]] +
a|
[width="99%",cols="20%,^16%,16%,^16%,16%,^16%",]
|===
|  |image:../../dcommon/images/contents.png[Go To Table Of
Contents,width=16,height=16] + | 
|link:../../[image:../../dcommon/images/search.png[Search] +
[.mini]##] | 
|link:../eclipselink_moxy.pdf[image:../../dcommon/images/pdf_icon.png[PDF]]
|===

|===

[[copyright]]
Copyright © 2013 by The Eclipse Foundation under the
http://www.eclipse.org/org/documents/epl-v10.php[Eclipse Public License
(EPL)] +
