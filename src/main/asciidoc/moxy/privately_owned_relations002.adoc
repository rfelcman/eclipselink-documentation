[[cse]][#top]##

[width="100%",cols="<50%,>50%",]
|===
a|
Developing JAXB Applications Using EclipseLink MOXy, *Release 4.0* +

a|
[width="99%",cols="20%,^16%,16%,^16%,16%,^16%",]
|===
|  |image:../../dcommon/images/contents.png[Go To Table Of
Contents,width=16,height=16] + | 
|link:../../[image:../../dcommon/images/search.png[Search] +
[.mini]##] | 
|link:../eclipselink_moxy.pdf[image:../../dcommon/images/pdf_icon.png[PDF]]
|===

|===

'''''

[cols="^,^,",]
|===
|link:privately_owned_relations001.htm[image:../../dcommon/images/larrow.png[Previous,width=16,height=16]]
|link:shared_reference_relations.htm[image:../../dcommon/images/rarrow.png[Next,width=16,height=16]]
| 
|===

[#BABGFHAG]####[#TLJAX335]####

== Mapping Privately Owned One-to-Many Relationships

This section illustrates how to map one-to-many relationships with
EclipseLink.

The schema in link:#BABJAAGI[Example 6-8] a typical one-to-many (1:M)
relationship between Customer and PhoneNumber, as shown in
link:#BABGDJID[Figure 6-2].

[#BABJAAGI]####[#TLJAX336]####

*_Example 6-8 Sample XML Mapping_*

[source,oac_no_warn]
----
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 
   <xsd:element name="customer" type="customer-type"/>
 
   <xsd:complexType name="customer-type">
      <xsd:sequence>
         <xsd:element name="first-name" type="xsd:string"/>
         <xsd:element name="last-name" type="xsd:string"/>
         <xsd:element name="phone-number" type="phone-type" minOccurs="0" maxOccurs="unbounded"/>
      </xsd:sequence>
   </xsd:complexType>
 
   <xsd:complexType name="phone-type">
      <xsd:sequence>
         <xsd:attribute name="type" type="xsd:string"/>
         <xsd:element name="number" type="xsd:int"/>
      </xsd:sequence>
   </xsd:complexType>
 
</xsd:schema>
 
----

[#BABGDJID]####[#TLJAX337]####

*_Figure 6-2 One-to-many Relationship_*

image:img/ccxm.gif[Description of Figure 6-2
follows,title="Description of Figure 6-2 follows"] +
link:img_text/ccxm.htm[Description of "Figure 6-2 One-to-many
Relationship"] +
 +

[#TLJAX338]##

[#sthref125]##

=== Mapping to Elements

link:#BABECFHA[Example 6-9] shows how to annotate your Java class to
obtain this mapping with EclipseLink. The standard JAXB `@XmlElement`
annotation, when used on a Collection or array field, can achieve this.

[#BABECFHA]####[#TLJAX339]####

*_Example 6-9 Using the @XmlElement Annotation_*

[source,oac_no_warn]
----
package example;
 
import jakarta.xml.bind.annotation.*;
 
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Customer {
   @XmlElement(name="first-name")
   private String firstName;
   @XmlElement(name="last-name")
   private String lastName;
   @XmlElement(name="phone-number")
   private List<PhoneNumber> phoneNumbers;
 
   ...
}
 
package example;
 
import jakarta.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.*;
 
@XmlAccessorType(XmlAccessType.FIELD)
public class PhoneNumber {
   @XmlAttribute
   private String type;
   private Integer number;
 
   ...
}
 
----

link:#BABGEFHC[Example 6-10] shows how to define your mapping
information in EclipseLink's OXM metadata format.

[#BABGEFHC]####[#TLJAX340]####

*_Example 6-10 Sample XML Mapping_*

[source,oac_no_warn]
----
...
<java-type name="Customer">
   <xml-root-element name="customer"/>
   <java-attributes>
      <xml-element java-attribute="firstName" name="first-name" type="java.lang.String"/>
      <xml-element java-attribute="lastName" name="last-name" type="java.lang.String"/>
      <xml-element java-attribute="phoneNumbers" name="phone-number" type="PhoneNumber" container-type="java.util.ArrayList"/>
   </java-attributes>
</java-type>
 
<java-type name="PhoneNumber">
   <java-attributes>
      <xml-attribute java-attribute="type" type="java.lang.String"/>
      <xml-value java-attribute="number" type="java.lang.Integer"/>
   </java-attributes>
</java-type>
...
 
----

[#TLJAX341]##

[#sthref126]##

=== Grouping Elements using the @XmlElementWrapper Annotation

To make the elements of the Collection appear inside a grouping element,
you can use `@XmlElementWrapper`:

[#TLJAX342]####[#sthref127]####

*_Example 6-11 Using the @XmlElementWrapper Annotation_*

[source,oac_no_warn]
----
package example;
 
import jakarta.xml.bind.annotation.*;
 
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Customer {
   @XmlElement(name = "phone-number")
   @XmlElementWrapper(name="phone-numbers")
   private List<PhoneNumber> phoneNumbers;
 
   ...
}
 
----

This will produce the following XML:

[source,oac_no_warn]
----
<customer>
   <first-name>Bob</first-name>
   <last-name>Smith</last-name>
   <phone-numbers>
      <phone-number type="Home">
         <number>5559827222</number>
      </phone-number>
      <phone-number type="Work">
         <number>5558872216</number>
      </phone-number>
   </phone-numbers>
</customer>
----

'''''

[width="66%",cols="50%,^,>50%",]
|===
a|
[width="96%",cols=",^50%,^50%",]
|===
| 
|link:privately_owned_relations001.htm[image:../../dcommon/images/larrow.png[Previous,width=16,height=16]]
|link:shared_reference_relations.htm[image:../../dcommon/images/rarrow.png[Next,width=16,height=16]]
|===

|http://www.eclipse.org/eclipselink/[image:../../dcommon/images/ellogo.png[EclipseLink,width=150]] +
a|
[width="99%",cols="20%,^16%,16%,^16%,16%,^16%",]
|===
|  |image:../../dcommon/images/contents.png[Go To Table Of
Contents,width=16,height=16] + | 
|link:../../[image:../../dcommon/images/search.png[Search] +
[.mini]##] | 
|link:../eclipselink_moxy.pdf[image:../../dcommon/images/pdf_icon.png[PDF]]
|===

|===

[[copyright]]
Copyright © 2013 by The Eclipse Foundation under the
http://www.eclipse.org/org/documents/epl-v10.php[Eclipse Public License
(EPL)] +
