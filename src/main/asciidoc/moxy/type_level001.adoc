[[cse]][#top]##

[width="100%",cols="<50%,>50%",]
|===
a|
Developing JAXB Applications Using EclipseLink MOXy, *Release 4.0* +

a|
[width="99%",cols="20%,^16%,16%,^16%,16%,^16%",]
|===
|  |image:../../dcommon/images/contents.png[Go To Table Of
Contents,width=16,height=16] + | 
|link:../../[image:../../dcommon/images/search.png[Search] +
[.mini]##] | 
|link:../eclipselink_moxy.pdf[image:../../dcommon/images/pdf_icon.png[PDF]]
|===

|===

'''''

[cols="^,^,",]
|===
|link:type_level.htm[image:../../dcommon/images/larrow.png[Previous,width=16,height=16]]
|link:type_level002.htm[image:../../dcommon/images/rarrow.png[Next,width=16,height=16]]
| 
|===

[#BABEEEEJ]####[#TLJAX186]####

== Defining the Default Root Element

At least one of your mapped classes must have a default root element
defined. This tells EclipseLink what the top-level root of your XML
document will be. Consider the *Customer* and *Address* classes shown in
link:#CIHDBEDH[Figure 3-1]:

[#CIHDBEDH]####[#TLJAX187]####

*_Figure 3-1 Sample Mapped Classes_*

image:img/defaultrootelement.gif[Sample Mapped
Classes,title="Sample Mapped Classes"] +
link:img_text/defaultrootelement.htm[Description of "Figure 3-1 Sample
Mapped Classes"] +
 +

These classes correspond to the XML schema shown in
link:#CIHFBEII[Example 3-1]. The schema contains a top-level element of
type `customer-type`, therefore our *Customer* class will need to have a
default root element specified.

[#CIHFBEII]####[#TLJAX188]####

*_Example 3-1 Sample XML Schema_*

[source,oac_no_warn]
----
<xsd:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
   <xsd:complexType name="address-type">
      <xsd:sequence>
         <element name="street" type="xsd:string"/>
         <element name="city" type="xsd:string"/>
      </xsd:sequence>
   </xsd:complexType>
 
   <xsd:element name="customer" type="customer-type"/>
 
   <xsd:complexType name="customer-type">
      <xsd:sequence>
         <xsd:element name="name" type="xsd:string"/>
         <xsd:element name="billing-address" type="address-type"/>
         <xsd:element name="shipping-address" type="address-type"/>
      </xsd:sequence>
   </xsd:complexType>
</xsd:schema>
 
----

link:#CIHGHJDA[Example 3-2] shows how to annotate your Java class to
specify a default root element. All that is needed is the standard JAXB
`@XmlRootElement` annotation.

[#CIHGHJDA]####[#TLJAX189]####

*_Example 3-2 Using the @XmlRootElement Annotation_*

[source,oac_no_warn]
----
package example;
 
import jakarta.xml.bind.annotation.*;
 
@XmlRootElement
public class Customer {
   private String name;
 
   @XmlElement(name="billing-address")
   private Address billingAddress;
 
   @XmlElement(name="shipping-address")
   private Address shippingAddress;
 
   ...
}
 
----

link:#CIHFDJCE[Example 3-3] shows how specify a default root element in
EclipseLink's OXM metadata format.

[#CIHFDJCE]####[#TLJAX190]####

*_Example 3-3 Specifying a Default Root Element_*

[source,oac_no_warn]
----
...
<java-type name="Customer">
   <xml-root-element/>
   <java-attributes>
      <xml-element java-attribute="name"/>
      <xml-element java-attribute="billingAddress" name="billing-address"/>
      <xml-element java-attribute="shippingAddress" name="shipping-address"/>
   </java-attributes>
</java-type>
...
 
----

[#TLJAX191]##

[#sthref58]##

=== Customizing the Default Root Element

In link:#CIHGHJDA[Example 3-2], our class is called *Customer*, and our
root element name in XML is `customer`. By default, when
`@XmlRootElement` is specified, the name of the class has its first
letter lower-cased, and this is set as the root element name. If,
however, the element name in XML is different from the Java class name,
a name attribute can be included in the annotation (as in
link:#CIHCGICI[Example 3-4]) or OXM metadata (as in
link:#CIHHJIHH[Example 3-5]):

[#CIHCGICI]####[#TLJAX192]####

*_Example 3-4 Using Annotations_*

[source,oac_no_warn]
----
package example;
 
import jakarta.xml.bind.annotation.*;
 
@XmlRootElement(name="my-customer")
public class Customer {
   private String name;
 
   @XmlElement(name="billing-address")
   private Address billingAddress;
 
   @XmlElement(name="shipping-address")
   private Address shippingAddress;
 
   ...
}
 
----

[#CIHHJIHH]####[#TLJAX193]####

*_Example 3-5 Using OXM Metadata_*

[source,oac_no_warn]
----
...
<java-type name="Customer">
   <xml-root-element name="my-customer"/>
   <java-attributes>
      <xml-element java-attribute="name"/>
      <xml-element java-attribute="billingAddress" name="billing-address"/>
      <xml-element java-attribute="shippingAddress" name="shipping-address"/>
   </java-attributes>
</java-type>
...
 
----

For more information on JAXB name-binding algorithms, see "Appendix D:
Binding XML Names to Java Identifiers" of the Java Architecture for XML
Binding (JAXB) Specification (`http://jcp.org/en/jsr/detail?id=222`).

[#TLJAX194]##

[#sthref59]##

=== Understanding How EclipseLink Uses the Default Root Element

When an instance of the *Customer* class is persisted to XML, the
EclipseLink runtime performs the following:

* Gets the default root element. The *Customer* class instance
corresponds to the root of the XML document. The EclipseLink runtime
uses the default root element (`customer`) specified in either
annotations or OXM to start the XML document. EclipseLink then uses the
mappings on the class to marshal the object's attributes.
+
[source,oac_no_warn]
----
<customer>
   <name>...</name>
</customer>
 
----
* When the EclipseLink runtime encounters an object attribute such as
`billingAddress`, it checks the mapping associated with it to determine
with what element (billing-`address`) to continue.
+
[source,oac_no_warn]
----
<customer>
   <name>...</name>
   <billing-address/>
</customer>
 
----
* The EclipseLink runtime checks the mapping's reference descriptor
(*Address*) to determine what attributes to persist.
+
[source,oac_no_warn]
----
<customer>
   <name>...</name>
   <billing-address>
      <street>...</street>
      <city>...</city>
   </billing-address>
</customer>
----

'''''

[width="66%",cols="50%,^,>50%",]
|===
a|
[width="96%",cols=",^50%,^50%",]
|===
| 
|link:type_level.htm[image:../../dcommon/images/larrow.png[Previous,width=16,height=16]]
|link:type_level002.htm[image:../../dcommon/images/rarrow.png[Next,width=16,height=16]]
|===

|http://www.eclipse.org/eclipselink/[image:../../dcommon/images/ellogo.png[EclipseLink,width=150]] +
a|
[width="99%",cols="20%,^16%,16%,^16%,16%,^16%",]
|===
|  |image:../../dcommon/images/contents.png[Go To Table Of
Contents,width=16,height=16] + | 
|link:../../[image:../../dcommon/images/search.png[Search] +
[.mini]##] | 
|link:../eclipselink_moxy.pdf[image:../../dcommon/images/pdf_icon.png[PDF]]
|===

|===

[[copyright]]
Copyright © 2013 by The Eclipse Foundation under the
http://www.eclipse.org/org/documents/epl-v10.php[Eclipse Public License
(EPL)] +
